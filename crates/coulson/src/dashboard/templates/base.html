<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>{{ title }} — Coulson</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script>tailwind.config = { darkMode: 'media', theme: { extend: { fontFamily: { mono: ['"JetBrains Mono"', 'ui-monospace', 'SFMono-Regular', 'monospace'] } } } }</script>
<script type="module" src="https://cdn.jsdelivr.net/npm/@hotwired/turbo@8.0.4/dist/turbo.es2017-esm.js"></script>
<script type="module">
import { Application, Controller } from "https://cdn.jsdelivr.net/npm/@hotwired/stimulus@3.2.2/dist/stimulus.js"
const Stimulus = Application.start()
Stimulus.register("toast", class extends Controller {
  connect() {
    setTimeout(() => {
      this.element.style.transition = "opacity 0.5s ease-out"
      this.element.style.opacity = "0"
      setTimeout(() => this.element.remove(), 500)
    }, 4000)
  }
})
</script>
<style>
  turbo-frame { display: contents; }
  @keyframes spin { to { transform: rotate(360deg); } }
  .animate-spin-slow { animation: spin 1.5s linear infinite; }
</style>
</head>
<body class="bg-zinc-50 text-zinc-900 antialiased min-h-screen dark:bg-zinc-950 dark:text-zinc-50">
<div id="toast-container" class="fixed top-4 right-4 z-50 flex flex-col gap-2 max-w-sm"></div>
<header class="sticky top-0 z-40 border-b border-zinc-200 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:border-zinc-800 dark:bg-zinc-950/80">
  <div class="mx-auto max-w-6xl flex items-center justify-between px-6 h-14">
    <div class="flex items-center gap-6">
      <a href="/" class="font-semibold text-base tracking-tight flex items-center gap-2">
        <svg class="h-6 w-6 flex-shrink-0" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="nav-bg" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#fff"/><stop offset="100%" stop-color="#e8edf4"/></linearGradient><linearGradient id="nav-c" x1="20%" y1="0%" x2="80%" y2="100%"><stop offset="0%" stop-color="#3a8cc8" stop-opacity=".85"/><stop offset="50%" stop-color="#5caad8" stop-opacity=".75"/><stop offset="100%" stop-color="#82c4ea" stop-opacity=".65"/></linearGradient><linearGradient id="nav-hl" x1="10%" y1="0%" x2="60%" y2="75%"><stop offset="0%" stop-color="#fff" stop-opacity=".55"/><stop offset="25%" stop-color="#fff" stop-opacity=".12"/><stop offset="100%" stop-color="#fff" stop-opacity="0"/></linearGradient></defs><rect x="100" y="100" width="824" height="824" rx="186" ry="186" fill="url(#nav-bg)"/><g transform="translate(512,512) scale(3.7)"><path d="M50-30A60 60 0 1 0 50 30L25 15A30 30 0 1 1 25-15Z" fill="url(#nav-c)" stroke="rgba(255,255,255,.35)" stroke-width=".5"/><path d="M50-30A60 60 0 1 0 50 30L25 15A30 30 0 1 1 25-15Z" fill="url(#nav-hl)"/></g></svg>
        Coulson
      </a>
      <nav class="flex items-center gap-1">
        <a href="/" data-turbo-action="advance" class="text-sm font-medium px-3 py-1.5 rounded-md transition-colors {% if active_nav == "apps" %}bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100{% else %}text-zinc-600 hover:text-zinc-900 hover:bg-zinc-50 dark:text-zinc-400 dark:hover:text-zinc-100 dark:hover:bg-zinc-800/50{% endif %}">Apps</a>
        <a href="/warnings" data-turbo-action="advance" class="text-sm font-medium px-3 py-1.5 rounded-md transition-colors {% if active_nav == "warnings" %}bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100{% else %}text-zinc-600 hover:text-zinc-900 hover:bg-zinc-50 dark:text-zinc-400 dark:hover:text-zinc-100 dark:hover:bg-zinc-800/50{% endif %}">Warnings{% if warning_count > 0 %} <span class="ml-1 inline-flex items-center rounded-full bg-amber-100 px-1.5 py-0.5 text-xs font-medium text-amber-800 dark:bg-amber-900/30 dark:text-amber-400">{{ warning_count }}</span>{% endif %}</a>
      </nav>
    </div>
    <div class="flex items-center gap-3">
      <span class="hidden sm:inline text-xs text-zinc-400 dark:text-zinc-600 font-mono">.{{ suffix }}</span>
      <form method="post" action="/scan">
        <button type="submit" class="inline-flex items-center gap-1.5 rounded-md bg-zinc-900 px-3 py-1.5 text-sm font-medium text-white shadow-sm hover:bg-zinc-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-zinc-900 transition-colors dark:bg-zinc-100 dark:text-zinc-900 dark:hover:bg-zinc-200">
          <svg class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182M2.985 14.652"/></svg>
          Scan
        </button>
      </form>
    </div>
  </div>
</header>
<main class="mx-auto max-w-6xl px-6 py-8">
{% block content %}{% endblock content %}
</main>
<footer class="mx-auto max-w-6xl px-6 py-6 mt-8 border-t border-zinc-200 dark:border-zinc-800">
  <p class="text-xs text-zinc-400 dark:text-zinc-600">Coulson — local development gateway</p>
</footer>
<script>
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('time[data-ts]').forEach(function(el) {
    if (!el.textContent) {
      el.textContent = new Date(parseInt(el.getAttribute('data-ts'), 10)).toLocaleTimeString('en-US', {hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit'});
    }
  });
});
</script>
</body>
</html>
